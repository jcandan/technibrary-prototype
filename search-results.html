<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="MobileOptimized" content="width" />
    <meta name="HandheldFriendly" content="true" />
    <meta name="viewport" content="width=1200">
    <title>Search Results | Technibrary</title>
    <style media="all">
      @import url("assets/css/style.css");
    </style>
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800|Roboto+Slab" media="all" />
  </head>
  <body>
    <nav class="navbar navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Technibrary</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li>
              <div class="input-group search-box">
                <input type="text" class="form-control" placeholder="Search" aria-describedby="">
                <span class="input-group-btn" id="">
                  <button type="button" class="btn btn-primary"><i class="fa fa-search"></i></button>
                </span>
              </div>
            </li>
            <li><a href="">About</a></li>
            <li class="active"><a href="#">Explore</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Ginger K. <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="#">My Favorites</a></li>
                <li><a href="#">My Profile</a></li>
                <li><a href="#">Log out</a></li>
              </ul>
            </li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">
      <div class="result-header">
        <div class="pull-left">
          <label>10 Results for:</label>
          <div class="h3">“12th grade english tutorials”</div>
        </div>
        <div class="sort-actions">
          <span>SORT BY: <a href="#">Relevance</a> | <a href="#">Price</a> | <a href="#">Date</a></span>
        </div>
        <div class="clearfix"></div>
      </div>
      <div class="row">
        <div class="col-sm-3">
          <div class="well">
            <h4>Compare Resources</h4>
            <img src="" width="30" height="30"/>
            <img src="" width="30" height="30"/>
            <img src="" width="30" height="30"/>
            <a href="#" class="btn bg-primary" type="button" data-toggle="modal" data-target="#comparison_modal">Compare</a>
          </div>
          <div id="facets" class="well"></div>
        </div>
        <div class="col-sm-9">
          <div id="results" class="well"></div>
        </div>
      </div>
    </div> <!-- /container -->

    <footer class="bg-primary footer">
      <div class="container">
        <div class="footer-info pull-left">
          <span>&copy; 2015 Technibrary</span>
          <address>1234 Main Street #567<br /> Chattnaooga, TN 12345</address>
        </div>
        <div class="footer-brand pull-right">
          <svg height="110" width="200">
            <circle cx="50" cy="60" r="18" stroke="white" stroke-width="2" fill-opacity="0" />
            <text x="80" y="65" font-size="20" fill="white">Technibrary</text>
          </svg>
        </div>
      </div>
    </footer>

    <!-- Modal -->
    <div class="modal fade" id="comparison_modal" tabindex="-1" role="dialog" aria-labelledby="comparison_modal_label">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="comparison_modal">Comparison table</h4>
          </div>
          <div class="modal-body">
            <table class = "table table-striped table-responsive">
              <thead>
              <tr>
                <th></th>
                <th>Product 1</th>
                <th>Product 4</th>
              </tr>
              </thead>
              <tbody>
              <tr>
                <th scope="row">Price</th>
                <td>$89.99</td>
                <td>$79.99</td>
              </tr>
              <tr>
                <th scope="row">Feature 1</th>
                <td>X</td>
                <td>X</td>
              </tr>
              <tr>
                <th scope="row">Feature 2</th>
                <td>X</td>
                <td>X</td>
              </tr>
              <tr>
                <th scope="row">Feature 3</th>
                <td>X</td>
                <td>X</td>
              </tr>
              <tr>
                <th scope="row">Feature 4</th>
                <td>X</td>
                <td>X</td>
              </tr>
              <tr>
                <th scope="row">Feature 5</th>
                <td>X</td>
                <td></td>
              </tr>
              <tr>
                <th scope="row">Feature 6</th>
                <td>X</td>
                <td></td>
              </tr>
              <tr>
                <th scope="row">Feature 7</th>
                <td>X</td>
                <td></td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <script src="assets/js/jquery.min.js?v=2.2.3"></script>
    <script src="assets/js/underscore-min.js"></script>
    <script src="assets/js/bootstrap.min.js?v=3.3.6"></script>
    <script src="assets/js/facetedsearch.js"></script>
    <script src="assets/js/script.js"></script>

    <script>
      $(function() {
      var item_template =
        '<div class="card">' +
          '<div class="card-container">' +
            '<div class="card-image col-sm-3">' +
              '<img src="assets/images/default-product.png" width="100%" height="100%" class="img-thumbnail" />' +
            '</div>' +
            '<div class="card-content col-sm-7">' +
              '<div class="checkbox"><label><input type="checkbox" name="compare" value="<%= obj.productid %>" />Compare</label></div>' +
              '<a href="#"><h3 class="card-title"><%= obj.productlabel %></h3></a>' +
              '<div class="pricing">' +
                '<span><%= obj.price %></span>' +
              '</div>' +
            '</div>' +
            '<div class="card-actions col-sm-2 pull-right">' +
              '<button type="button" class="close" data-hide="<%= obj.productid %>">&times;</button>' +
              '<div class="result-buttons">' +
                '<button type="button" class="btn btn-primary fa fa-heart" data-favorite="<%= obj.productid %>" data-toggle="tooltip" data-placement="bottom" title="Add to favorites"></button>' +
                '<button type="button" class="btn btn-primary fa fa-share" data-share="<%= obj.productid %>" data-toggle="tooltip" data-placement="bottom" title="Share with friends"></button>' +
              '</div>' +
            '</div>' +
          '</div>' +
          '<div class="pros-cons">' +
            '<p><strong>Pros:</strong> <%= obj.pros %></p>' +
            '<p><strong>Cons:</strong> <%= obj.cons %></p>' +
          '</div>' +
        '</div><div class="clearfix"></div>' +
        '<hr />';

        // Define spreadsheet URL.
        var mySpreadsheet = 'https://spreadsheets.google.com/feeds/list/1wrOPUAxTewDOBvY5iInMEEkXZiIF6yervNQbW7dTX1Q/od6/public/values?alt=json';

        // build items object array
        var items = [];
        $.getJSON(mySpreadsheet, function(data) {
          $.each(data.feed.entry,function(key,val){
            var row = {};

            $.each(val, function(key, val) {
              var col = key.replace('gsx$', '');
              var value = val['$t'];

              if(value) {
                // strings containing a double quote should be assigned as a whole.
                if(value.indexOf('"') > -1) {
                  value = value.replace(/"/g, '');
                }
                // otherwise, check for commas and split into an array with elements trimmed.
                else if(value.indexOf(',') > -1) {
                  value = value.split(',').map(function(e){ return e.trim(); });
                }
              }

              row[col] = value;
            });

            items.push(row);
          });

          settings = {
            items           : items,
            facets          : {
              'platforms'       : 'Platforms',
              'usecase'         : 'Use Cases',
              'fieldofstudy'    : 'Field of Study',
              'gradelevel'      : 'Grade Level',
              'stars'           : 'Rating'
            },
            facetContainer     : '<div class=facetsearch id=<%= id %> ></div>',
            facetTitleTemplate : '<h4 class=facettitle><%= title %></h4>',
            facetListContainer : '<ol class="list-unstyled facetlist"></ol>',
            listItemTemplate   : '<li><a class=facetitem id="<%= id %>"><%= name %> <span class=facetitemcount>(<%= count %>)</span></a></li>',
            resultSelector  : '#results',
            facetSelector   : '#facets',
            resultTemplate  : item_template,
            orderByOptions  : {'price': 'Price', 'rating': 'Popularity'},
          }

          $.facetelize(settings);
        });
      });
    </script>
  </body>
</html>
